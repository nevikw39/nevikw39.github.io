(()=>{var Oe=Object.create;var Ee=Object.defineProperty;var $e=Object.getOwnPropertyDescriptor;var Pe=Object.getOwnPropertyNames;var Fe=Object.getPrototypeOf,We=Object.prototype.hasOwnProperty;var je=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var Be=(r,e,n,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let c of Pe(e))!We.call(r,c)&&c!==n&&Ee(r,c,{get:()=>e[c],enumerable:!(a=$e(e,c))||a.enumerable});return r};var He=(r,e,n)=>(n=r!=null?Oe(Fe(r)):{},Be(e||!r||!r.__esModule?Ee(n,"default",{value:r,enumerable:!0}):n,r));var Ae=je((pe,ge)=>{(function(r,e){typeof pe=="object"&&typeof ge<"u"?ge.exports=e():typeof define=="function"&&define.amd?define(e):r.Mark=e()})(pe,function(){"use strict";var r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},e=function(u,o){if(!(u instanceof o))throw new TypeError("Cannot call a class as a function")},n=function(){function u(o,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(o,i.key,i)}}return function(o,t,s){return t&&u(o.prototype,t),s&&u(o,s),o}}(),a=Object.assign||function(u){for(var o=1;o<arguments.length;o++){var t=arguments[o];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(u[s]=t[s])}return u},c=function(){function u(o){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5e3;e(this,u),this.ctx=o,this.iframes=t,this.exclude=s,this.iframesTimeout=i}return n(u,[{key:"getContexts",value:function(){var t=void 0,s=[];return typeof this.ctx>"u"||!this.ctx?t=[]:NodeList.prototype.isPrototypeOf(this.ctx)?t=Array.prototype.slice.call(this.ctx):Array.isArray(this.ctx)?t=this.ctx:typeof this.ctx=="string"?t=Array.prototype.slice.call(document.querySelectorAll(this.ctx)):t=[this.ctx],t.forEach(function(i){var h=s.filter(function(f){return f.contains(i)}).length>0;s.indexOf(i)===-1&&!h&&s.push(i)}),s}},{key:"getIframeContents",value:function(t,s){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},h=void 0;try{var f=t.contentWindow;if(h=f.document,!f||!h)throw new Error("iframe inaccessible")}catch{i()}h&&s(h)}},{key:"isIframeBlank",value:function(t){var s="about:blank",i=t.getAttribute("src").trim(),h=t.contentWindow.location.href;return h===s&&i!==s&&i}},{key:"observeIframeLoad",value:function(t,s,i){var h=this,f=!1,g=null,p=function m(){if(!f){f=!0,clearTimeout(g);try{h.isIframeBlank(t)||(t.removeEventListener("load",m),h.getIframeContents(t,s,i))}catch{i()}}};t.addEventListener("load",p),g=setTimeout(p,this.iframesTimeout)}},{key:"onIframeReady",value:function(t,s,i){try{t.contentWindow.document.readyState==="complete"?this.isIframeBlank(t)?this.observeIframeLoad(t,s,i):this.getIframeContents(t,s,i):this.observeIframeLoad(t,s,i)}catch{i()}}},{key:"waitForIframes",value:function(t,s){var i=this,h=0;this.forEachIframe(t,function(){return!0},function(f){h++,i.waitForIframes(f.querySelector("html"),function(){--h||s()})},function(f){f||s()})}},{key:"forEachIframe",value:function(t,s,i){var h=this,f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){},g=t.querySelectorAll("iframe"),p=g.length,m=0;g=Array.prototype.slice.call(g);var v=function(){--p<=0&&f(m)};p||v(),g.forEach(function(y){u.matches(y,h.exclude)?v():h.onIframeReady(y,function(w){s(y)&&(m++,i(w)),v()},v)})}},{key:"createIterator",value:function(t,s,i){return document.createNodeIterator(t,s,i,!1)}},{key:"createInstanceOnIframe",value:function(t){return new u(t.querySelector("html"),this.iframes)}},{key:"compareNodeIframe",value:function(t,s,i){var h=t.compareDocumentPosition(i),f=Node.DOCUMENT_POSITION_PRECEDING;if(h&f)if(s!==null){var g=s.compareDocumentPosition(i),p=Node.DOCUMENT_POSITION_FOLLOWING;if(g&p)return!0}else return!0;return!1}},{key:"getIteratorNode",value:function(t){var s=t.previousNode(),i=void 0;return s===null?i=t.nextNode():i=t.nextNode()&&t.nextNode(),{prevNode:s,node:i}}},{key:"checkIframeFilter",value:function(t,s,i,h){var f=!1,g=!1;return h.forEach(function(p,m){p.val===i&&(f=m,g=p.handled)}),this.compareNodeIframe(t,s,i)?(f===!1&&!g?h.push({val:i,handled:!0}):f!==!1&&!g&&(h[f].handled=!0),!0):(f===!1&&h.push({val:i,handled:!1}),!1)}},{key:"handleOpenIframes",value:function(t,s,i,h){var f=this;t.forEach(function(g){g.handled||f.getIframeContents(g.val,function(p){f.createInstanceOnIframe(p).forEachNode(s,i,h)})})}},{key:"iterateThroughNodes",value:function(t,s,i,h,f){for(var g=this,p=this.createIterator(s,t,h),m=[],v=[],y=void 0,w=void 0,x=function(){var M=g.getIteratorNode(p);return w=M.prevNode,y=M.node,y};x();)this.iframes&&this.forEachIframe(s,function(I){return g.checkIframeFilter(y,w,I,m)},function(I){g.createInstanceOnIframe(I).forEachNode(t,function(M){return v.push(M)},h)}),v.push(y);v.forEach(function(I){i(I)}),this.iframes&&this.handleOpenIframes(m,t,i,h),f()}},{key:"forEachNode",value:function(t,s,i){var h=this,f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){},g=this.getContexts(),p=g.length;p||f(),g.forEach(function(m){var v=function(){h.iterateThroughNodes(t,m,s,i,function(){--p<=0&&f()})};h.iframes?h.waitForIframes(m,v):v()})}}],[{key:"matches",value:function(t,s){var i=typeof s=="string"?[s]:s,h=t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;if(h){var f=!1;return i.every(function(g){return h.call(t,g)?(f=!0,!1):!0}),f}else return!1}}]),u}(),l=function(){function u(o){e(this,u),this.ctx=o,this.ie=!1;var t=window.navigator.userAgent;(t.indexOf("MSIE")>-1||t.indexOf("Trident")>-1)&&(this.ie=!0)}return n(u,[{key:"log",value:function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"debug",i=this.opt.log;this.opt.debug&&(typeof i>"u"?"undefined":r(i))==="object"&&typeof i[s]=="function"&&i[s]("mark.js: "+t)}},{key:"escapeStr",value:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}},{key:"createRegExp",value:function(t){return this.opt.wildcards!=="disabled"&&(t=this.setupWildcardsRegExp(t)),t=this.escapeStr(t),Object.keys(this.opt.synonyms).length&&(t=this.createSynonymsRegExp(t)),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(t=this.setupIgnoreJoinersRegExp(t)),this.opt.diacritics&&(t=this.createDiacriticsRegExp(t)),t=this.createMergedBlanksRegExp(t),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(t=this.createJoinersRegExp(t)),this.opt.wildcards!=="disabled"&&(t=this.createWildcardsRegExp(t)),t=this.createAccuracyRegExp(t),t}},{key:"createSynonymsRegExp",value:function(t){var s=this.opt.synonyms,i=this.opt.caseSensitive?"":"i",h=this.opt.ignoreJoiners||this.opt.ignorePunctuation.length?"\0":"";for(var f in s)if(s.hasOwnProperty(f)){var g=s[f],p=this.opt.wildcards!=="disabled"?this.setupWildcardsRegExp(f):this.escapeStr(f),m=this.opt.wildcards!=="disabled"?this.setupWildcardsRegExp(g):this.escapeStr(g);p!==""&&m!==""&&(t=t.replace(new RegExp("("+this.escapeStr(p)+"|"+this.escapeStr(m)+")","gm"+i),h+("("+this.processSynomyms(p)+"|")+(this.processSynomyms(m)+")")+h))}return t}},{key:"processSynomyms",value:function(t){return(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(t=this.setupIgnoreJoinersRegExp(t)),t}},{key:"setupWildcardsRegExp",value:function(t){return t=t.replace(/(?:\\)*\?/g,function(s){return s.charAt(0)==="\\"?"?":""}),t.replace(/(?:\\)*\*/g,function(s){return s.charAt(0)==="\\"?"*":""})}},{key:"createWildcardsRegExp",value:function(t){var s=this.opt.wildcards==="withSpaces";return t.replace(/\u0001/g,s?"[\\S\\s]?":"\\S?").replace(/\u0002/g,s?"[\\S\\s]*?":"\\S*")}},{key:"setupIgnoreJoinersRegExp",value:function(t){return t.replace(/[^(|)\\]/g,function(s,i,h){var f=h.charAt(i+1);return/[(|)\\]/.test(f)||f===""?s:s+"\0"})}},{key:"createJoinersRegExp",value:function(t){var s=[],i=this.opt.ignorePunctuation;return Array.isArray(i)&&i.length&&s.push(this.escapeStr(i.join(""))),this.opt.ignoreJoiners&&s.push("\\u00ad\\u200b\\u200c\\u200d"),s.length?t.split(/\u0000+/).join("["+s.join("")+"]*"):t}},{key:"createDiacriticsRegExp",value:function(t){var s=this.opt.caseSensitive?"":"i",i=this.opt.caseSensitive?["a\xE0\xE1\u1EA3\xE3\u1EA1\u0103\u1EB1\u1EAF\u1EB3\u1EB5\u1EB7\xE2\u1EA7\u1EA5\u1EA9\u1EAB\u1EAD\xE4\xE5\u0101\u0105","A\xC0\xC1\u1EA2\xC3\u1EA0\u0102\u1EB0\u1EAE\u1EB2\u1EB4\u1EB6\xC2\u1EA6\u1EA4\u1EA8\u1EAA\u1EAC\xC4\xC5\u0100\u0104","c\xE7\u0107\u010D","C\xC7\u0106\u010C","d\u0111\u010F","D\u0110\u010E","e\xE8\xE9\u1EBB\u1EBD\u1EB9\xEA\u1EC1\u1EBF\u1EC3\u1EC5\u1EC7\xEB\u011B\u0113\u0119","E\xC8\xC9\u1EBA\u1EBC\u1EB8\xCA\u1EC0\u1EBE\u1EC2\u1EC4\u1EC6\xCB\u011A\u0112\u0118","i\xEC\xED\u1EC9\u0129\u1ECB\xEE\xEF\u012B","I\xCC\xCD\u1EC8\u0128\u1ECA\xCE\xCF\u012A","l\u0142","L\u0141","n\xF1\u0148\u0144","N\xD1\u0147\u0143","o\xF2\xF3\u1ECF\xF5\u1ECD\xF4\u1ED3\u1ED1\u1ED5\u1ED7\u1ED9\u01A1\u1EDF\u1EE1\u1EDB\u1EDD\u1EE3\xF6\xF8\u014D","O\xD2\xD3\u1ECE\xD5\u1ECC\xD4\u1ED2\u1ED0\u1ED4\u1ED6\u1ED8\u01A0\u1EDE\u1EE0\u1EDA\u1EDC\u1EE2\xD6\xD8\u014C","r\u0159","R\u0158","s\u0161\u015B\u0219\u015F","S\u0160\u015A\u0218\u015E","t\u0165\u021B\u0163","T\u0164\u021A\u0162","u\xF9\xFA\u1EE7\u0169\u1EE5\u01B0\u1EEB\u1EE9\u1EED\u1EEF\u1EF1\xFB\xFC\u016F\u016B","U\xD9\xDA\u1EE6\u0168\u1EE4\u01AF\u1EEA\u1EE8\u1EEC\u1EEE\u1EF0\xDB\xDC\u016E\u016A","y\xFD\u1EF3\u1EF7\u1EF9\u1EF5\xFF","Y\xDD\u1EF2\u1EF6\u1EF8\u1EF4\u0178","z\u017E\u017C\u017A","Z\u017D\u017B\u0179"]:["a\xE0\xE1\u1EA3\xE3\u1EA1\u0103\u1EB1\u1EAF\u1EB3\u1EB5\u1EB7\xE2\u1EA7\u1EA5\u1EA9\u1EAB\u1EAD\xE4\xE5\u0101\u0105A\xC0\xC1\u1EA2\xC3\u1EA0\u0102\u1EB0\u1EAE\u1EB2\u1EB4\u1EB6\xC2\u1EA6\u1EA4\u1EA8\u1EAA\u1EAC\xC4\xC5\u0100\u0104","c\xE7\u0107\u010DC\xC7\u0106\u010C","d\u0111\u010FD\u0110\u010E","e\xE8\xE9\u1EBB\u1EBD\u1EB9\xEA\u1EC1\u1EBF\u1EC3\u1EC5\u1EC7\xEB\u011B\u0113\u0119E\xC8\xC9\u1EBA\u1EBC\u1EB8\xCA\u1EC0\u1EBE\u1EC2\u1EC4\u1EC6\xCB\u011A\u0112\u0118","i\xEC\xED\u1EC9\u0129\u1ECB\xEE\xEF\u012BI\xCC\xCD\u1EC8\u0128\u1ECA\xCE\xCF\u012A","l\u0142L\u0141","n\xF1\u0148\u0144N\xD1\u0147\u0143","o\xF2\xF3\u1ECF\xF5\u1ECD\xF4\u1ED3\u1ED1\u1ED5\u1ED7\u1ED9\u01A1\u1EDF\u1EE1\u1EDB\u1EDD\u1EE3\xF6\xF8\u014DO\xD2\xD3\u1ECE\xD5\u1ECC\xD4\u1ED2\u1ED0\u1ED4\u1ED6\u1ED8\u01A0\u1EDE\u1EE0\u1EDA\u1EDC\u1EE2\xD6\xD8\u014C","r\u0159R\u0158","s\u0161\u015B\u0219\u015FS\u0160\u015A\u0218\u015E","t\u0165\u021B\u0163T\u0164\u021A\u0162","u\xF9\xFA\u1EE7\u0169\u1EE5\u01B0\u1EEB\u1EE9\u1EED\u1EEF\u1EF1\xFB\xFC\u016F\u016BU\xD9\xDA\u1EE6\u0168\u1EE4\u01AF\u1EEA\u1EE8\u1EEC\u1EEE\u1EF0\xDB\xDC\u016E\u016A","y\xFD\u1EF3\u1EF7\u1EF9\u1EF5\xFFY\xDD\u1EF2\u1EF6\u1EF8\u1EF4\u0178","z\u017E\u017C\u017AZ\u017D\u017B\u0179"],h=[];return t.split("").forEach(function(f){i.every(function(g){if(g.indexOf(f)!==-1){if(h.indexOf(g)>-1)return!1;t=t.replace(new RegExp("["+g+"]","gm"+s),"["+g+"]"),h.push(g)}return!0})}),t}},{key:"createMergedBlanksRegExp",value:function(t){return t.replace(/[\s]+/gmi,"[\\s]+")}},{key:"createAccuracyRegExp",value:function(t){var s=this,i="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~\xA1\xBF",h=this.opt.accuracy,f=typeof h=="string"?h:h.value,g=typeof h=="string"?[]:h.limiters,p="";switch(g.forEach(function(m){p+="|"+s.escapeStr(m)}),f){case"partially":default:return"()("+t+")";case"complementary":return p="\\s"+(p||this.escapeStr(i)),"()([^"+p+"]*"+t+"[^"+p+"]*)";case"exactly":return"(^|\\s"+p+")("+t+")(?=$|\\s"+p+")"}}},{key:"getSeparatedKeywords",value:function(t){var s=this,i=[];return t.forEach(function(h){s.opt.separateWordSearch?h.split(" ").forEach(function(f){f.trim()&&i.indexOf(f)===-1&&i.push(f)}):h.trim()&&i.indexOf(h)===-1&&i.push(h)}),{keywords:i.sort(function(h,f){return f.length-h.length}),length:i.length}}},{key:"isNumeric",value:function(t){return Number(parseFloat(t))==t}},{key:"checkRanges",value:function(t){var s=this;if(!Array.isArray(t)||Object.prototype.toString.call(t[0])!=="[object Object]")return this.log("markRanges() will only accept an array of objects"),this.opt.noMatch(t),[];var i=[],h=0;return t.sort(function(f,g){return f.start-g.start}).forEach(function(f){var g=s.callNoMatchOnInvalidRanges(f,h),p=g.start,m=g.end,v=g.valid;v&&(f.start=p,f.length=m-p,i.push(f),h=m)}),i}},{key:"callNoMatchOnInvalidRanges",value:function(t,s){var i=void 0,h=void 0,f=!1;return t&&typeof t.start<"u"?(i=parseInt(t.start,10),h=i+parseInt(t.length,10),this.isNumeric(t.start)&&this.isNumeric(t.length)&&h-s>0&&h-i>0?f=!0:(this.log("Ignoring invalid or overlapping range: "+(""+JSON.stringify(t))),this.opt.noMatch(t))):(this.log("Ignoring invalid range: "+JSON.stringify(t)),this.opt.noMatch(t)),{start:i,end:h,valid:f}}},{key:"checkWhitespaceRanges",value:function(t,s,i){var h=void 0,f=!0,g=i.length,p=s-g,m=parseInt(t.start,10)-p;return m=m>g?g:m,h=m+parseInt(t.length,10),h>g&&(h=g,this.log("End range automatically set to the max value of "+g)),m<0||h-m<0||m>g||h>g?(f=!1,this.log("Invalid range: "+JSON.stringify(t)),this.opt.noMatch(t)):i.substring(m,h).replace(/\s+/g,"")===""&&(f=!1,this.log("Skipping whitespace only range: "+JSON.stringify(t)),this.opt.noMatch(t)),{start:m,end:h,valid:f}}},{key:"getTextNodes",value:function(t){var s=this,i="",h=[];this.iterator.forEachNode(NodeFilter.SHOW_TEXT,function(f){h.push({start:i.length,end:(i+=f.textContent).length,node:f})},function(f){return s.matchesExclude(f.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},function(){t({value:i,nodes:h})})}},{key:"matchesExclude",value:function(t){return c.matches(t,this.opt.exclude.concat(["script","style","title","head","html"]))}},{key:"wrapRangeInTextNode",value:function(t,s,i){var h=this.opt.element?this.opt.element:"mark",f=t.splitText(s),g=f.splitText(i-s),p=document.createElement(h);return p.setAttribute("data-markjs","true"),this.opt.className&&p.setAttribute("class",this.opt.className),p.textContent=f.textContent,f.parentNode.replaceChild(p,f),g}},{key:"wrapRangeInMappedTextNode",value:function(t,s,i,h,f){var g=this;t.nodes.every(function(p,m){var v=t.nodes[m+1];if(typeof v>"u"||v.start>s){if(!h(p.node))return!1;var y=s-p.start,w=(i>p.end?p.end:i)-p.start,x=t.value.substr(0,p.start),I=t.value.substr(w+p.start);if(p.node=g.wrapRangeInTextNode(p.node,y,w),t.value=x+I,t.nodes.forEach(function(M,S){S>=m&&(t.nodes[S].start>0&&S!==m&&(t.nodes[S].start-=w),t.nodes[S].end-=w)}),i-=w,f(p.node.previousSibling,p.start),i>p.end)s=p.end;else return!1}return!0})}},{key:"wrapMatches",value:function(t,s,i,h,f){var g=this,p=s===0?0:s+1;this.getTextNodes(function(m){m.nodes.forEach(function(v){v=v.node;for(var y=void 0;(y=t.exec(v.textContent))!==null&&y[p]!=="";)if(i(y[p],v)){var w=y.index;if(p!==0)for(var x=1;x<p;x++)w+=y[x].length;v=g.wrapRangeInTextNode(v,w,w+y[p].length),h(v.previousSibling),t.lastIndex=0}}),f()})}},{key:"wrapMatchesAcrossElements",value:function(t,s,i,h,f){var g=this,p=s===0?0:s+1;this.getTextNodes(function(m){for(var v=void 0;(v=t.exec(m.value))!==null&&v[p]!=="";){var y=v.index;if(p!==0)for(var w=1;w<p;w++)y+=v[w].length;var x=y+v[p].length;g.wrapRangeInMappedTextNode(m,y,x,function(I){return i(v[p],I)},function(I,M){t.lastIndex=M,h(I)})}f()})}},{key:"wrapRangeFromIndex",value:function(t,s,i,h){var f=this;this.getTextNodes(function(g){var p=g.value.length;t.forEach(function(m,v){var y=f.checkWhitespaceRanges(m,p,g.value),w=y.start,x=y.end,I=y.valid;I&&f.wrapRangeInMappedTextNode(g,w,x,function(M){return s(M,m,g.value.substring(w,x),v)},function(M){i(M,m)})}),h()})}},{key:"unwrapMatches",value:function(t){for(var s=t.parentNode,i=document.createDocumentFragment();t.firstChild;)i.appendChild(t.removeChild(t.firstChild));s.replaceChild(i,t),this.ie?this.normalizeTextNode(s):s.normalize()}},{key:"normalizeTextNode",value:function(t){if(t){if(t.nodeType===3)for(;t.nextSibling&&t.nextSibling.nodeType===3;)t.nodeValue+=t.nextSibling.nodeValue,t.parentNode.removeChild(t.nextSibling);else this.normalizeTextNode(t.firstChild);this.normalizeTextNode(t.nextSibling)}}},{key:"markRegExp",value:function(t,s){var i=this;this.opt=s,this.log('Searching with expression "'+t+'"');var h=0,f="wrapMatches",g=function(m){h++,i.opt.each(m)};this.opt.acrossElements&&(f="wrapMatchesAcrossElements"),this[f](t,this.opt.ignoreGroups,function(p,m){return i.opt.filter(m,p,h)},g,function(){h===0&&i.opt.noMatch(t),i.opt.done(h)})}},{key:"mark",value:function(t,s){var i=this;this.opt=s;var h=0,f="wrapMatches",g=this.getSeparatedKeywords(typeof t=="string"?[t]:t),p=g.keywords,m=g.length,v=this.opt.caseSensitive?"":"i",y=function w(x){var I=new RegExp(i.createRegExp(x),"gm"+v),M=0;i.log('Searching with expression "'+I+'"'),i[f](I,1,function(S,b){return i.opt.filter(b,x,h,M)},function(S){M++,h++,i.opt.each(S)},function(){M===0&&i.opt.noMatch(x),p[m-1]===x?i.opt.done(h):w(p[p.indexOf(x)+1])})};this.opt.acrossElements&&(f="wrapMatchesAcrossElements"),m===0?this.opt.done(h):y(p[0])}},{key:"markRanges",value:function(t,s){var i=this;this.opt=s;var h=0,f=this.checkRanges(t);f&&f.length?(this.log("Starting to mark with the following ranges: "+JSON.stringify(f)),this.wrapRangeFromIndex(f,function(g,p,m,v){return i.opt.filter(g,p,m,v)},function(g,p){h++,i.opt.each(g,p)},function(){i.opt.done(h)})):this.opt.done(h)}},{key:"unmark",value:function(t){var s=this;this.opt=t;var i=this.opt.element?this.opt.element:"*";i+="[data-markjs]",this.opt.className&&(i+="."+this.opt.className),this.log('Removal selector "'+i+'"'),this.iterator.forEachNode(NodeFilter.SHOW_ELEMENT,function(h){s.unwrapMatches(h)},function(h){var f=c.matches(h,i),g=s.matchesExclude(h);return!f||g?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},this.opt.done)}},{key:"opt",set:function(t){this._opt=a({},{element:"",className:"",exclude:[],iframes:!1,iframesTimeout:5e3,separateWordSearch:!0,diacritics:!0,synonyms:{},accuracy:"partially",acrossElements:!1,caseSensitive:!1,ignoreJoiners:!1,ignoreGroups:0,ignorePunctuation:[],wildcards:"disabled",each:function(){},noMatch:function(){},filter:function(){return!0},done:function(){},debug:!1,log:window.console},t)},get:function(){return this._opt}},{key:"iterator",get:function(){return new c(this.ctx,this.opt.iframes,this.opt.exclude,this.opt.iframesTimeout)}}]),u}();function d(u){var o=this,t=new l(u);return this.mark=function(s,i){return t.mark(s,i),o},this.markRegExp=function(s,i){return t.markRegExp(s,i),o},this.markRanges=function(s,i){return t.markRanges(s,i),o},this.unmark=function(s){return t.unmark(s),o},this}return d})});function C(r){return Array.isArray?Array.isArray(r):ke(r)==="[object Array]"}var De=1/0;function Ke(r){if(typeof r=="string")return r;let e=r+"";return e=="0"&&1/r==-De?"-0":e}function Ue(r){return r==null?"":Ke(r)}function L(r){return typeof r=="string"}function be(r){return typeof r=="number"}function Je(r){return r===!0||r===!1||ze(r)&&ke(r)=="[object Boolean]"}function Re(r){return typeof r=="object"}function ze(r){return Re(r)&&r!==null}function k(r){return r!=null}function X(r){return!r.trim().length}function ke(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}var Ge="Incorrect 'index' type",Ve=r=>`Invalid value for key ${r}`,Ye=r=>`Pattern length exceeds max of ${r}.`,Xe=r=>`Missing ${r} property in key`,qe=r=>`Property 'weight' in key '${r}' must be a positive integer`,we=Object.prototype.hasOwnProperty,q=class{constructor(e){this._keys=[],this._keyMap={};let n=0;e.forEach(a=>{let c=Ne(a);n+=c.weight,this._keys.push(c),this._keyMap[c.id]=c,n+=c.weight}),this._keys.forEach(a=>{a.weight/=n})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}};function Ne(r){let e=null,n=null,a=null,c=1,l=null;if(L(r)||C(r))a=r,e=xe(r),n=Q(r);else{if(!we.call(r,"name"))throw new Error(Xe("name"));let d=r.name;if(a=d,we.call(r,"weight")&&(c=r.weight,c<=0))throw new Error(qe(d));e=xe(d),n=Q(d),l=r.getFn}return{path:e,id:n,weight:c,src:a,getFn:l}}function xe(r){return C(r)?r:r.split(".")}function Q(r){return C(r)?r.join("."):r}function Qe(r,e){let n=[],a=!1,c=(l,d,u)=>{if(k(l))if(!d[u])n.push(l);else{let o=d[u],t=l[o];if(!k(t))return;if(u===d.length-1&&(L(t)||be(t)||Je(t)))n.push(Ue(t));else if(C(t)){a=!0;for(let s=0,i=t.length;s<i;s+=1)c(t[s],d,u+1)}else d.length&&c(t,d,u+1)}};return c(r,L(e)?e.split("."):e,0),a?n:n[0]}var Ze={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},et={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(r,e)=>r.score===e.score?r.idx<e.idx?-1:1:r.score<e.score?-1:1},tt={location:0,threshold:.6,distance:100},nt={useExtendedSearch:!1,getFn:Qe,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1},E={...et,...Ze,...tt,...nt},rt=/[^ ]+/g;function st(r=1,e=3){let n=new Map,a=Math.pow(10,e);return{get(c){let l=c.match(rt).length;if(n.has(l))return n.get(l);let d=1/Math.pow(l,.5*r),u=parseFloat(Math.round(d*a)/a);return n.set(l,u),u},clear(){n.clear()}}}var B=class{constructor({getFn:e=E.getFn,fieldNormWeight:n=E.fieldNormWeight}={}){this.norm=st(n,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((n,a)=>{this._keysMap[n.id]=a})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,L(this.docs[0])?this.docs.forEach((e,n)=>{this._addString(e,n)}):this.docs.forEach((e,n)=>{this._addObject(e,n)}),this.norm.clear())}add(e){let n=this.size();L(e)?this._addString(e,n):this._addObject(e,n)}removeAt(e){this.records.splice(e,1);for(let n=e,a=this.size();n<a;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(e,n){return e[this._keysMap[n]]}size(){return this.records.length}_addString(e,n){if(!k(e)||X(e))return;let a={v:e,i:n,n:this.norm.get(e)};this.records.push(a)}_addObject(e,n){let a={i:n,$:{}};this.keys.forEach((c,l)=>{let d=c.getFn?c.getFn(e):this.getFn(e,c.path);if(k(d)){if(C(d)){let u=[],o=[{nestedArrIndex:-1,value:d}];for(;o.length;){let{nestedArrIndex:t,value:s}=o.pop();if(k(s))if(L(s)&&!X(s)){let i={v:s,i:t,n:this.norm.get(s)};u.push(i)}else C(s)&&s.forEach((i,h)=>{o.push({nestedArrIndex:h,value:i})})}a.$[l]=u}else if(L(d)&&!X(d)){let u={v:d,n:this.norm.get(d)};a.$[l]=u}}}),this.records.push(a)}toJSON(){return{keys:this.keys,records:this.records}}};function Te(r,e,{getFn:n=E.getFn,fieldNormWeight:a=E.fieldNormWeight}={}){let c=new B({getFn:n,fieldNormWeight:a});return c.setKeys(r.map(Ne)),c.setSources(e),c.create(),c}function it(r,{getFn:e=E.getFn,fieldNormWeight:n=E.fieldNormWeight}={}){let{keys:a,records:c}=r,l=new B({getFn:e,fieldNormWeight:n});return l.setKeys(a),l.setIndexRecords(c),l}function U(r,{errors:e=0,currentLocation:n=0,expectedLocation:a=0,distance:c=E.distance,ignoreLocation:l=E.ignoreLocation}={}){let d=e/r.length;if(l)return d;let u=Math.abs(a-n);return c?d+u/c:u?1:d}function at(r=[],e=E.minMatchCharLength){let n=[],a=-1,c=-1,l=0;for(let d=r.length;l<d;l+=1){let u=r[l];u&&a===-1?a=l:!u&&a!==-1&&(c=l-1,c-a+1>=e&&n.push([a,c]),a=-1)}return r[l-1]&&l-a>=e&&n.push([a,l-1]),n}var P=32;function ot(r,e,n,{location:a=E.location,distance:c=E.distance,threshold:l=E.threshold,findAllMatches:d=E.findAllMatches,minMatchCharLength:u=E.minMatchCharLength,includeMatches:o=E.includeMatches,ignoreLocation:t=E.ignoreLocation}={}){if(e.length>P)throw new Error(Ye(P));let s=e.length,i=r.length,h=Math.max(0,Math.min(a,i)),f=l,g=h,p=u>1||o,m=p?Array(i):[],v;for(;(v=r.indexOf(e,g))>-1;){let S=U(e,{currentLocation:v,expectedLocation:h,distance:c,ignoreLocation:t});if(f=Math.min(S,f),g=v+s,p){let b=0;for(;b<s;)m[v+b]=1,b+=1}}g=-1;let y=[],w=1,x=s+i,I=1<<s-1;for(let S=0;S<s;S+=1){let b=0,O=x;for(;b<O;)U(e,{errors:S,currentLocation:h+O,expectedLocation:h,distance:c,ignoreLocation:t})<=f?b=O:x=O,O=Math.floor((x-b)/2+b);x=O;let ve=Math.max(1,h-O+1),Y=d?i:Math.min(h+O,i)+s,F=Array(Y+2);F[Y+1]=(1<<S)-1;for(let T=Y;T>=ve;T-=1){let K=T-1,ye=n[r.charAt(K)];if(p&&(m[K]=+!!ye),F[T]=(F[T+1]<<1|1)&ye,S&&(F[T]|=(y[T+1]|y[T])<<1|1|y[T+1]),F[T]&I&&(w=U(e,{errors:S,currentLocation:K,expectedLocation:h,distance:c,ignoreLocation:t}),w<=f)){if(f=w,g=K,g<=h)break;ve=Math.max(1,2*h-g)}}if(U(e,{errors:S+1,currentLocation:h,expectedLocation:h,distance:c,ignoreLocation:t})>f)break;y=F}let M={isMatch:g>=0,score:Math.max(.001,w)};if(p){let S=at(m,u);S.length?o&&(M.indices=S):M.isMatch=!1}return M}function ct(r){let e={};for(let n=0,a=r.length;n<a;n+=1){let c=r.charAt(n);e[c]=(e[c]||0)|1<<a-n-1}return e}var J=class{constructor(e,{location:n=E.location,threshold:a=E.threshold,distance:c=E.distance,includeMatches:l=E.includeMatches,findAllMatches:d=E.findAllMatches,minMatchCharLength:u=E.minMatchCharLength,isCaseSensitive:o=E.isCaseSensitive,ignoreLocation:t=E.ignoreLocation}={}){if(this.options={location:n,threshold:a,distance:c,includeMatches:l,findAllMatches:d,minMatchCharLength:u,isCaseSensitive:o,ignoreLocation:t},this.pattern=o?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;let s=(h,f)=>{this.chunks.push({pattern:h,alphabet:ct(h),startIndex:f})},i=this.pattern.length;if(i>P){let h=0,f=i%P,g=i-f;for(;h<g;)s(this.pattern.substr(h,P),h),h+=P;if(f){let p=i-P;s(this.pattern.substr(p),p)}}else s(this.pattern,0)}searchIn(e){let{isCaseSensitive:n,includeMatches:a}=this.options;if(n||(e=e.toLowerCase()),this.pattern===e){let g={isMatch:!0,score:0};return a&&(g.indices=[[0,e.length-1]]),g}let{location:c,distance:l,threshold:d,findAllMatches:u,minMatchCharLength:o,ignoreLocation:t}=this.options,s=[],i=0,h=!1;this.chunks.forEach(({pattern:g,alphabet:p,startIndex:m})=>{let{isMatch:v,score:y,indices:w}=ot(e,g,p,{location:c+m,distance:l,threshold:d,findAllMatches:u,minMatchCharLength:o,includeMatches:a,ignoreLocation:t});v&&(h=!0),i+=y,v&&w&&(s=[...s,...w])});let f={isMatch:h,score:h?i/this.chunks.length:1};return h&&a&&(f.indices=s),f}},_=class{constructor(e){this.pattern=e}static isMultiMatch(e){return Ie(e,this.multiRegex)}static isSingleMatch(e){return Ie(e,this.singleRegex)}search(){}};function Ie(r,e){let n=r.match(e);return n?n[1]:null}var Z=class extends _{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){let n=e===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}},ee=class extends _{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){let a=e.indexOf(this.pattern)===-1;return{isMatch:a,score:a?0:1,indices:[0,e.length-1]}}},te=class extends _{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){let n=e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}},ne=class extends _{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){let n=!e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}},re=class extends _{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){let n=e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},se=class extends _{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){let n=!e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}},z=class extends _{constructor(e,{location:n=E.location,threshold:a=E.threshold,distance:c=E.distance,includeMatches:l=E.includeMatches,findAllMatches:d=E.findAllMatches,minMatchCharLength:u=E.minMatchCharLength,isCaseSensitive:o=E.isCaseSensitive,ignoreLocation:t=E.ignoreLocation}={}){super(e),this._bitapSearch=new J(e,{location:n,threshold:a,distance:c,includeMatches:l,findAllMatches:d,minMatchCharLength:u,isCaseSensitive:o,ignoreLocation:t})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}},G=class extends _{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let n=0,a,c=[],l=this.pattern.length;for(;(a=e.indexOf(this.pattern,n))>-1;)n=a+l,c.push([a,n-1]);let d=!!c.length;return{isMatch:d,score:d?0:1,indices:c}}},ie=[Z,G,te,ne,se,re,ee,z],Me=ie.length,lt=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,ht="|";function ut(r,e={}){return r.split(ht).map(n=>{let a=n.trim().split(lt).filter(l=>l&&!!l.trim()),c=[];for(let l=0,d=a.length;l<d;l+=1){let u=a[l],o=!1,t=-1;for(;!o&&++t<Me;){let s=ie[t],i=s.isMultiMatch(u);i&&(c.push(new s(i,e)),o=!0)}if(!o)for(t=-1;++t<Me;){let s=ie[t],i=s.isSingleMatch(u);if(i){c.push(new s(i,e));break}}}return c})}var ft=new Set([z.type,G.type]),ae=class{constructor(e,{isCaseSensitive:n=E.isCaseSensitive,includeMatches:a=E.includeMatches,minMatchCharLength:c=E.minMatchCharLength,ignoreLocation:l=E.ignoreLocation,findAllMatches:d=E.findAllMatches,location:u=E.location,threshold:o=E.threshold,distance:t=E.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:a,minMatchCharLength:c,findAllMatches:d,ignoreLocation:l,location:u,threshold:o,distance:t},this.pattern=n?e:e.toLowerCase(),this.query=ut(this.pattern,this.options)}static condition(e,n){return n.useExtendedSearch}searchIn(e){let n=this.query;if(!n)return{isMatch:!1,score:1};let{includeMatches:a,isCaseSensitive:c}=this.options;e=c?e:e.toLowerCase();let l=0,d=[],u=0;for(let o=0,t=n.length;o<t;o+=1){let s=n[o];d.length=0,l=0;for(let i=0,h=s.length;i<h;i+=1){let f=s[i],{isMatch:g,indices:p,score:m}=f.search(e);if(g){if(l+=1,u+=m,a){let v=f.constructor.type;ft.has(v)?d=[...d,...p]:d.push(p)}}else{u=0,l=0,d.length=0;break}}if(l){let i={isMatch:!0,score:u/l};return a&&(i.indices=d),i}}return{isMatch:!1,score:1}}},oe=[];function dt(...r){oe.push(...r)}function ce(r,e){for(let n=0,a=oe.length;n<a;n+=1){let c=oe[n];if(c.condition(r,e))return new c(r,e)}return new J(r,e)}var V={AND:"$and",OR:"$or"},le={PATH:"$path",PATTERN:"$val"},he=r=>!!(r[V.AND]||r[V.OR]),pt=r=>!!r[le.PATH],gt=r=>!C(r)&&Re(r)&&!he(r),Se=r=>({[V.AND]:Object.keys(r).map(e=>({[e]:r[e]}))});function Le(r,e,{auto:n=!0}={}){let a=c=>{let l=Object.keys(c),d=pt(c);if(!d&&l.length>1&&!he(c))return a(Se(c));if(gt(c)){let o=d?c[le.PATH]:l[0],t=d?c[le.PATTERN]:c[o];if(!L(t))throw new Error(Ve(o));let s={keyId:Q(o),pattern:t};return n&&(s.searcher=ce(t,e)),s}let u={children:[],operator:l[0]};return l.forEach(o=>{let t=c[o];C(t)&&t.forEach(s=>{u.children.push(a(s))})}),u};return he(r)||(r=Se(r)),a(r)}function mt(r,{ignoreFieldNorm:e=E.ignoreFieldNorm}){r.forEach(n=>{let a=1;n.matches.forEach(({key:c,norm:l,score:d})=>{let u=c?c.weight:null;a*=Math.pow(d===0&&u?Number.EPSILON:d,(u||1)*(e?1:l))}),n.score=a})}function vt(r,e){let n=r.matches;e.matches=[],k(n)&&n.forEach(a=>{if(!k(a.indices)||!a.indices.length)return;let{indices:c,value:l}=a,d={indices:c,value:l};a.key&&(d.key=a.key.src),a.idx>-1&&(d.refIndex=a.idx),e.matches.push(d)})}function yt(r,e){e.score=r.score}function Et(r,e,{includeMatches:n=E.includeMatches,includeScore:a=E.includeScore}={}){let c=[];return n&&c.push(vt),a&&c.push(yt),r.map(l=>{let{idx:d}=l,u={item:e[d],refIndex:d};return c.length&&c.forEach(o=>{o(l,u)}),u})}var A=class{constructor(e,n={},a){this.options={...E,...n},this.options.useExtendedSearch,this._keyStore=new q(this.options.keys),this.setCollection(e,a)}setCollection(e,n){if(this._docs=e,n&&!(n instanceof B))throw new Error(Ge);this._myIndex=n||Te(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){k(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){let n=[];for(let a=0,c=this._docs.length;a<c;a+=1){let l=this._docs[a];e(l,a)&&(this.removeAt(a),a-=1,c-=1,n.push(l))}return n}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:n=-1}={}){let{includeMatches:a,includeScore:c,shouldSort:l,sortFn:d,ignoreFieldNorm:u}=this.options,o=L(e)?L(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return mt(o,{ignoreFieldNorm:u}),l&&o.sort(d),be(n)&&n>-1&&(o=o.slice(0,n)),Et(o,this._docs,{includeMatches:a,includeScore:c})}_searchStringList(e){let n=ce(e,this.options),{records:a}=this._myIndex,c=[];return a.forEach(({v:l,i:d,n:u})=>{if(!k(l))return;let{isMatch:o,score:t,indices:s}=n.searchIn(l);o&&c.push({item:l,idx:d,matches:[{score:t,value:l,norm:u,indices:s}]})}),c}_searchLogical(e){let n=Le(e,this.options),a=(u,o,t)=>{if(!u.children){let{keyId:i,searcher:h}=u,f=this._findMatches({key:this._keyStore.get(i),value:this._myIndex.getValueForItemAtKeyId(o,i),searcher:h});return f&&f.length?[{idx:t,item:o,matches:f}]:[]}let s=[];for(let i=0,h=u.children.length;i<h;i+=1){let f=u.children[i],g=a(f,o,t);if(g.length)s.push(...g);else if(u.operator===V.AND)return[]}return s},c=this._myIndex.records,l={},d=[];return c.forEach(({$:u,i:o})=>{if(k(u)){let t=a(n,u,o);t.length&&(l[o]||(l[o]={idx:o,item:u,matches:[]},d.push(l[o])),t.forEach(({matches:s})=>{l[o].matches.push(...s)}))}}),d}_searchObjectList(e){let n=ce(e,this.options),{keys:a,records:c}=this._myIndex,l=[];return c.forEach(({$:d,i:u})=>{if(!k(d))return;let o=[];a.forEach((t,s)=>{o.push(...this._findMatches({key:t,value:d[s],searcher:n}))}),o.length&&l.push({idx:u,item:d,matches:o})}),l}_findMatches({key:e,value:n,searcher:a}){if(!k(n))return[];let c=[];if(C(n))n.forEach(({v:l,i:d,n:u})=>{if(!k(l))return;let{isMatch:o,score:t,indices:s}=a.searchIn(l);o&&c.push({score:t,key:e,value:l,idx:d,norm:u,indices:s})});else{let{v:l,n:d}=n,{isMatch:u,score:o,indices:t}=a.searchIn(l);u&&c.push({score:o,key:e,value:l,norm:d,indices:t})}return c}};A.version="6.6.2";A.createIndex=Te;A.parseIndex=it;A.config=E;A.parseQuery=Le;dt(ae);var wt=Object.prototype.toString,j=Array.isArray||function(e){return wt.call(e)==="[object Array]"};function fe(r){return typeof r=="function"}function xt(r){return j(r)?"array":typeof r}function ue(r){return r.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function _e(r,e){return r!=null&&typeof r=="object"&&e in r}function It(r,e){return r!=null&&typeof r!="object"&&r.hasOwnProperty&&r.hasOwnProperty(e)}var Mt=RegExp.prototype.test;function St(r,e){return Mt.call(r,e)}var bt=/\S/;function Rt(r){return!St(bt,r)}var kt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function Nt(r){return String(r).replace(/[&<>"'`=\/]/g,function(n){return kt[n]})}var Tt=/\s*/,Lt=/\s+/,Ce=/\s*=/,_t=/\s*\}/,Ct=/#|\^|\/|>|\{|&|=|!/;function At(r,e){if(!r)return[];var n=!1,a=[],c=[],l=[],d=!1,u=!1,o="",t=0;function s(){if(d&&!u)for(;l.length;)delete c[l.pop()];else l=[];d=!1,u=!1}var i,h,f;function g(b){if(typeof b=="string"&&(b=b.split(Lt,2)),!j(b)||b.length!==2)throw new Error("Invalid tags: "+b);i=new RegExp(ue(b[0])+"\\s*"),h=new RegExp("\\s*"+ue(b[1])),f=new RegExp("\\s*"+ue("}"+b[1]))}g(e||N.tags);for(var p=new D(r),m,v,y,w,x,I;!p.eos();){if(m=p.pos,y=p.scanUntil(i),y)for(var M=0,S=y.length;M<S;++M)w=y.charAt(M),Rt(w)?(l.push(c.length),o+=w):(u=!0,n=!0,o+=" "),c.push(["text",w,m,m+1]),m+=1,w===`
`&&(s(),o="",t=0,n=!1);if(!p.scan(i))break;if(d=!0,v=p.scan(Ct)||"name",p.scan(Tt),v==="="?(y=p.scanUntil(Ce),p.scan(Ce),p.scanUntil(h)):v==="{"?(y=p.scanUntil(f),p.scan(_t),p.scanUntil(h),v="&"):y=p.scanUntil(h),!p.scan(h))throw new Error("Unclosed tag at "+p.pos);if(v==">"?x=[v,y,m,p.pos,o,t,n]:x=[v,y,m,p.pos],t++,c.push(x),v==="#"||v==="^")a.push(x);else if(v==="/"){if(I=a.pop(),!I)throw new Error('Unopened section "'+y+'" at '+m);if(I[1]!==y)throw new Error('Unclosed section "'+I[1]+'" at '+m)}else v==="name"||v==="{"||v==="&"?u=!0:v==="="&&g(y)}if(s(),I=a.pop(),I)throw new Error('Unclosed section "'+I[1]+'" at '+p.pos);return $t(Ot(c))}function Ot(r){for(var e=[],n,a,c=0,l=r.length;c<l;++c)n=r[c],n&&(n[0]==="text"&&a&&a[0]==="text"?(a[1]+=n[1],a[3]=n[3]):(e.push(n),a=n));return e}function $t(r){for(var e=[],n=e,a=[],c,l,d=0,u=r.length;d<u;++d)switch(c=r[d],c[0]){case"#":case"^":n.push(c),a.push(c),n=c[4]=[];break;case"/":l=a.pop(),l[5]=c[2],n=a.length>0?a[a.length-1][4]:e;break;default:n.push(c)}return e}function D(r){this.string=r,this.tail=r,this.pos=0}D.prototype.eos=function(){return this.tail===""};D.prototype.scan=function(e){var n=this.tail.match(e);if(!n||n.index!==0)return"";var a=n[0];return this.tail=this.tail.substring(a.length),this.pos+=a.length,a};D.prototype.scanUntil=function(e){var n=this.tail.search(e),a;switch(n){case-1:a=this.tail,this.tail="";break;case 0:a="";break;default:a=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=a.length,a};function W(r,e){this.view=r,this.cache={".":this.view},this.parent=e}W.prototype.push=function(e){return new W(e,this)};W.prototype.lookup=function(e){var n=this.cache,a;if(n.hasOwnProperty(e))a=n[e];else{for(var c=this,l,d,u,o=!1;c;){if(e.indexOf(".")>0)for(l=c.view,d=e.split("."),u=0;l!=null&&u<d.length;)u===d.length-1&&(o=_e(l,d[u])||It(l,d[u])),l=l[d[u++]];else l=c.view[e],o=_e(c.view,e);if(o){a=l;break}c=c.parent}n[e]=a}return fe(a)&&(a=a.call(this.view)),a};function R(){this.templateCache={_cache:{},set:function(e,n){this._cache[e]=n},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}R.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};R.prototype.parse=function(e,n){var a=this.templateCache,c=e+":"+(n||N.tags).join(":"),l=typeof a<"u",d=l?a.get(c):void 0;return d==null&&(d=At(e,n),l&&a.set(c,d)),d};R.prototype.render=function(e,n,a,c){var l=this.getConfigTags(c),d=this.parse(e,l),u=n instanceof W?n:new W(n,void 0);return this.renderTokens(d,u,a,e,c)};R.prototype.renderTokens=function(e,n,a,c,l){for(var d="",u,o,t,s=0,i=e.length;s<i;++s)t=void 0,u=e[s],o=u[0],o==="#"?t=this.renderSection(u,n,a,c,l):o==="^"?t=this.renderInverted(u,n,a,c,l):o===">"?t=this.renderPartial(u,n,a,l):o==="&"?t=this.unescapedValue(u,n):o==="name"?t=this.escapedValue(u,n,l):o==="text"&&(t=this.rawValue(u)),t!==void 0&&(d+=t);return d};R.prototype.renderSection=function(e,n,a,c,l){var d=this,u="",o=n.lookup(e[1]);function t(h){return d.render(h,n,a,l)}if(o){if(j(o))for(var s=0,i=o.length;s<i;++s)u+=this.renderTokens(e[4],n.push(o[s]),a,c,l);else if(typeof o=="object"||typeof o=="string"||typeof o=="number")u+=this.renderTokens(e[4],n.push(o),a,c,l);else if(fe(o)){if(typeof c!="string")throw new Error("Cannot use higher-order sections without the original template");o=o.call(n.view,c.slice(e[3],e[5]),t),o!=null&&(u+=o)}else u+=this.renderTokens(e[4],n,a,c,l);return u}};R.prototype.renderInverted=function(e,n,a,c,l){var d=n.lookup(e[1]);if(!d||j(d)&&d.length===0)return this.renderTokens(e[4],n,a,c,l)};R.prototype.indentPartial=function(e,n,a){for(var c=n.replace(/[^ \t]/g,""),l=e.split(`
`),d=0;d<l.length;d++)l[d].length&&(d>0||!a)&&(l[d]=c+l[d]);return l.join(`
`)};R.prototype.renderPartial=function(e,n,a,c){if(a){var l=this.getConfigTags(c),d=fe(a)?a(e[1]):a[e[1]];if(d!=null){var u=e[6],o=e[5],t=e[4],s=d;o==0&&t&&(s=this.indentPartial(d,t,u));var i=this.parse(s,l);return this.renderTokens(i,n,a,s,c)}}};R.prototype.unescapedValue=function(e,n){var a=n.lookup(e[1]);if(a!=null)return a};R.prototype.escapedValue=function(e,n,a){var c=this.getConfigEscape(a)||N.escape,l=n.lookup(e[1]);if(l!=null)return typeof l=="number"&&c===N.escape?String(l):c(l)};R.prototype.rawValue=function(e){return e[1]};R.prototype.getConfigTags=function(e){return j(e)?e:e&&typeof e=="object"?e.tags:void 0};R.prototype.getConfigEscape=function(e){if(e&&typeof e=="object"&&!j(e))return e.escape};var N={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(r){H.templateCache=r},get templateCache(){return H.templateCache}},H=new R;N.clearCache=function(){return H.clearCache()};N.parse=function(e,n){return H.parse(e,n)};N.render=function(e,n,a,c){if(typeof e!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+xt(e)+'" was given as the first argument for mustache#render(template, view, partials)');return H.render(e,n,a,c)};N.escape=Nt;N.Scanner=D;N.Context=W;N.Writer=R;var de=N;var me=He(Ae()),$=class{constructor(e){this.form=e}fuseOptions;fuse;resultsElement;stat;resultContentWordCount;highlightOptions={element:"span",className:"text-primary"};tmplMissingKeywords;tmplNoResults;tmplStat;tmplResult;input;searchBarInput;title;paginate=10;page=1;results;loading=!1;loadingSpinner;loadMore;run(){this.title=document.title,this.resultsElement=document.getElementById("searchResults"),this.stat=document.getElementById("searchStat"),this.loadingSpinner=document.getElementById("loadingSpinner"),this.tmplMissingKeywords=document.getElementById("templateMissingKeywords").innerHTML,this.tmplNoResults=document.getElementById("templateNoResults").innerHTML,this.tmplStat=document.getElementById("templateStat").innerHTML,this.tmplResult=document.getElementById("templateResult").innerHTML,this.resultContentWordCount=window.searchResultContentWordCount,this.paginate=window.searchPaginate,this.initForm(),this.initFuse();let e=this;this.loadMore=document.getElementById("btnLoadMore"),this.loadMore.addEventListener("click",()=>{e.poplateResults()})}initFuse(){let e=this;this.fuseOptions=window.fuseOptions,console.debug(e.fuseOptions);let n=new XMLHttpRequest;n.onreadystatechange=()=>{if(n.readyState===4){if(n.status!==200){console.error({error:n.statusText});return}let a=n.response;e.fuse=new A(a,e.fuseOptions),e.search(e.input.value)}},n.responseType="json",n.open("GET",window.searchIndex,!0),n.send(null)}initForm(){this.input=this.form.querySelector('input[name="q"]'),this.searchBarInput=document.querySelector('.search-bar input[name="q"]'),this.input.value===""&&(this.input.value=$.getKeywordFromURL()),this.updateSearchbar(this.input.value),document.querySelector(".search-bar input");let e=this;this.form.addEventListener("submit",n=>{e.handleSubmit(n)})}handleSubmit(e){this.search(this.input.value),this.updateSearchbar(this.input.value),e.preventDefault()}updateSearchbar(e){this.searchBarInput&&(this.searchBarInput.value=e)}static getKeywordFromURL(){return new URLSearchParams(window.location.search).get("q")}hideLoadMoreBtn(){this.loadMore.classList.add("d-none")}showLoadMoreBtn(){this.loadMore.classList.remove("d-none")}hideLoadingSpinner(){this.loadingSpinner.classList.contains("d-none")||this.loadingSpinner.classList.add("d-none")}showLoadingSpinner(){this.loadingSpinner.classList.remove("d-none")}search(e){if(this.showLoadingSpinner(),this.resultsElement.innerHTML="",e===""){this.stat.innerHTML=this.tmplMissingKeywords,this.hideLoadMoreBtn(),this.hideLoadingSpinner();return}this.page=1,this.setPage(e);let n=this.fuse.search(e);console.debug({results:n}),this.results=n,this.hideLoadingSpinner(),this.results.length>this.paginate?this.showLoadMoreBtn():this.hideLoadMoreBtn(),n.length>0?this.poplateResults():this.stat.innerHTML=this.tmplNoResults}setPage(e){let n=(e?`${e} - `:"")+this.title,a=`${window.location.pathname}?q=${encodeURIComponent(e)}`;window.history.pushState(null,n,a),document.title=n}static normalizeTaxonomy(e,n){return n(e).toLowerCase().replaceAll(" ","-")}poplateResults(){if(!this.results||this.loading)return;this.loading=!0,this.loadMore.setAttribute("disabled",""),this.stat.innerHTML=de.render(this.tmplStat,{total:this.results.length});let e=this,n=(this.page-1)*this.paginate,a=0;for(;n<this.results.length&&a<this.paginate;n+=1,a+=1){let l=this.results[n],d=(this.page-1)*this.paginate+n,u=[],o=[];l.matches.forEach(i=>{i.indices.forEach(h=>{let f=i.value.substring(h[0],h[1]+1);switch(i.key){case"title":u.push(f);break;case"content":o.push(f);break;default:}})});let{content:t}=l.item;if(t.length>e.resultContentWordCount){let i=0;if(o.length>0){let h=t.indexOf(o[0]);h+o[0].length>e.resultContentWordCount-1&&(i=h)}t=`${(i===0?"":"...")+t.substring(i,i+e.resultContentWordCount)}...`}let s=`searchResult${d}`;e.resultsElement.insertAdjacentHTML("beforeend",de.render(e.tmplResult,{title:l.item.title,content:t,id:s,img:l.item.img,smallImg:l.item.smallImg,largeImg:l.item.largeImg,permalink:l.item.permalink,categories:l.item.categories,tags:l.item.tags,series:l.item.series,score:$.formatScore(l.score),date:l.item.date,url(){return $.normalizeTaxonomy}})),e.highlight(s,u,o)}this.loading=!1,this.loadMore.removeAttribute("disabled"),this.results.length<=this.paginate*this.page?this.hideLoadMoreBtn():this.showLoadMoreBtn(),this.page+=1;let c=document.createEvent("HTMLEvents");c.initEvent("hbs:viewer:update"),document.dispatchEvent(c)}static formatScore(e){return(100*(1-e)).toFixed(1)}highlight(e,n,a){new me.default(document.querySelectorAll(`#${e} .search-result-title`)).mark(n,this.highlightOptions),new me.default(document.querySelectorAll(`#${e} .search-result-content`)).mark(a,this.highlightOptions)}};document.addEventListener("DOMContentLoaded",()=>{new $(document.querySelector("#searchForm")).run()});})();
/*! Bundled license information:

mark.js/dist/mark.js:
  (*!***************************************************
  * mark.js v8.11.1
  * https://markjs.io/
  * Copyright (c) 2014–2018, Julian Kühnel
  * Released under the MIT license https://git.io/vwTVl
  *****************************************************)

mustache/mustache.mjs:
  (*!
   * mustache.js - Logic-less {{mustache}} templates with JavaScript
   * http://github.com/janl/mustache.js
   *)
*/
